<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>FW4SPL 17.0.0 released</title>
    <meta name="description" content="" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="//fw4spl-org.github.io/fw4spl-blog/themes/Casper/favicon.ico">

    <link rel="stylesheet" type="text/css" href="//fw4spl-org.github.io/fw4spl-blog/themes/Casper/assets/css/screen.css?v=1.0.0" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />

    <link rel="canonical" href="https://fw4spl-org.github.io/fw4spl-blog/2018/07/02/FW4SPL-1700-released.html" />
    
    <meta property="og:site_name" content="FW4SPL" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="FW4SPL 17.0.0 released" />
    <meta property="og:description" content="We are glad to announce the last major release 17.0.0 of FW4SPL ! In the following lines, we will describe what&amp;#8217;s inside. For a complete changelog, please refer to the changelog of each repository: https://github.com/..." />
    <meta property="og:url" content="https://fw4spl-org.github.io/fw4spl-blog/2018/07/02/FW4SPL-1700-released.html" />
    <meta property="article:published_time" content="2018-07-01T22:00:00.000Z" />
    <meta property="article:modified_time" content="2018-07-02T07:18:34.477Z" />
    <meta property="article:tag" content="fw4spl" />
    <meta property="article:tag" content="release" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="FW4SPL 17.0.0 released" />
    <meta name="twitter:description" content="We are glad to announce the last major release 17.0.0 of FW4SPL ! In the following lines, we will describe what&amp;#8217;s inside. For a complete changelog, please refer to the changelog of each repository: https://github.com/..." />
    <meta name="twitter:url" content="https://fw4spl-org.github.io/fw4spl-blog/2018/07/02/FW4SPL-1700-released.html" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "FW4SPL",
    "author": {
        "@type": "Person",
        "name": "Flavien Bridault",
        "image": "https://avatars0.githubusercontent.com/u/8638653?v=4",
        "url": "undefined/author/undefined",
        "sameAs": "http://www.ircad.fr"
    },
    "headline": "FW4SPL 17.0.0 released",
    "url": "https://fw4spl-org.github.io/fw4spl-blog/2018/07/02/FW4SPL-1700-released.html",
    "datePublished": "2018-07-01T22:00:00.000Z",
    "dateModified": "2018-07-02T07:18:34.477Z",
    "keywords": "fw4spl,  release",
    "description": "We are glad to announce the last major release 17.0.0 of FW4SPL ! In the following lines, we will describe what&amp;#8217;s inside. For a complete changelog, please refer to the changelog of each repository: https://github.com/..."
}
    </script>

    <meta name="generator" content="Ghost ?" />
    <link rel="alternate" type="application/rss+xml" title="FW4SPL" href="https://fw4spl-org.github.io/fw4spl-blog/rss" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css">
</head>
<body class="post-template tag-fw4spl tag-release">

    


<header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        <a class="back-button icon-arrow-left" href="https://fw4spl-org.github.io/fw4spl-blog">Home</a>
        <!-- <a class="subscribe-button icon-feed" href="https://fw4spl-org.github.io/fw4spl-blog/rss/">Subscribe</a> -->
    </nav>
</header>

<main class="content" role="main">

    <article class="post tag-fw4spl tag-release">

        <header class="post-header">
            <h1 class="post-title">FW4SPL 17.0.0 released</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2018-07-02">02 July 2018</time>  on <a href="https://fw4spl-org.github.io/fw4spl-blog/tag/fw4spl">fw4spl</a>, <a href="https://fw4spl-org.github.io/fw4spl-blog/tag/release"> release</a>
            </section>
        </header>

        <section class="post-content">
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>We are glad to announce the last major release <a href="https://github.com/fw4spl-org/fw4spl-git/releases/tag/17.0.0"><strong>17.0.0</strong> of <strong>FW4SPL</strong></a> !</p>
</div>
<div class="paragraph">
<p>In the following lines, we will describe what&#8217;s inside. For a complete changelog, please refer to the changelog of each repository:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/fw4spl-org/fw4spl/blob/master/CHANGELOG.md" class="bare">https://github.com/fw4spl-org/fw4spl/blob/master/CHANGELOG.md</a></p>
</li>
<li>
<p><a href="https://github.com/fw4spl-org/fw4spl-ar/blob/master/CHANGELOG.md" class="bare">https://github.com/fw4spl-org/fw4spl-ar/blob/master/CHANGELOG.md</a></p>
</li>
<li>
<p><a href="https://github.com/fw4spl-org/fw4spl-ogre/blob/master/CHANGELOG.md" class="bare">https://github.com/fw4spl-org/fw4spl-ogre/blob/master/CHANGELOG.md</a></p>
</li>
<li>
<p><a href="https://github.com/fw4spl-org/fw4spl-ext/blob/master/CHANGELOG.md" class="bare">https://github.com/fw4spl-org/fw4spl-ext/blob/master/CHANGELOG.md</a></p>
</li>
<li>
<p><a href="https://github.com/fw4spl-org/fw4spl-deps/blob/master/CHANGELOG.md" class="bare">https://github.com/fw4spl-org/fw4spl-deps/blob/master/CHANGELOG.md</a></p>
</li>
<li>
<p><a href="https://github.com/fw4spl-org/fw4spl-ext-deps/blob/master/CHANGELOG.md" class="bare">https://github.com/fw4spl-org/fw4spl-ext-deps/blob/master/CHANGELOG.md</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dependencies">Dependencies</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_simplified_dependencies_options">Simplified dependencies options</h3>
<div class="paragraph">
<p>With <strong>fw4spl-deps</strong>, thre is now an option for each additional source repository that gather all
required dependencies. So we introduce:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ENABLE_AR</p>
</li>
<li>
<p>ENABLE_OGRE</p>
</li>
<li>
<p>ENABLE_EXTRAS</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To achieve this we move some dependencies. <strong>cgogn</strong>, <strong>cryptopp</strong>, <strong>orbslam2</strong> and
<strong>vlc</strong> are promoted to fw4spl-deps. These dependencies are used widely so
this seems reasonable. Now <strong>fw4spl-ext-deps</strong> only contains <strong>aram</strong>, so
really experimental deps, making it useless for most people.</p>
</div>
<div class="paragraph">
<p>Some obsolete deps were removed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ann</p>
</li>
<li>
<p>curl</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_automatic_discovery_of_additional_dependencies">Automatic discovery of additional dependencies</h3>
<div class="paragraph">
<p>Setting the CMake variable <code>ADDITIONAL_DEPS</code> was tedious and error-prone. Now we explore the folders at the same level of FW4SPL to find extra repositories. Then a CMake option, set to ON by default, is proposed to enable/disable the repository. This will make CMake configuration phase easier than ever !</p>
</div>
</div>
<div class="sect2">
<h3 id="_updates">Updates</h3>
<div class="ulist">
<ul>
<li>
<p>Qt 5.9.5</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_new_features">New features</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_automatic_discovery_of_additional_repositories">Automatic discovery of additional repositories</h3>
<div class="paragraph">
<p>In a similar way to what has been done for the dependencies, new we explore the folders at the same level of FW4SPL to find extra repositories. Then a CMake option, set to ON by default, is proposed to enable/disable the repository.</p>
</div>
</div>
<div class="sect2">
<h3 id="_dicom_support">DICOM support</h3>
<div class="paragraph">
<p>We still work hard to improve our integration of reading and writing DICOM images and segmentations. This time we added a reference to DICOM tags into fw4spl data, in order to use them to create back valid DICOM to save image and/or models.</p>
</div>
</div>
<div class="sect2">
<h3 id="_ssignalshortcut">SSignalShortcut</h3>
<div class="paragraph">
<p>A new SSignalShortcut service in fw4spl has been added. This service allows to map keys or combination of keys to the trigger of a signal.</p>
</div>
</div>
<div class="sect2">
<h3 id="_charuco_calibration">Charuco calibration</h3>
<div class="paragraph">
<p>We added a new ChArUco board activity calibration in ARCalibration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>New Bundle with services related to Charuco calibration</p>
</li>
<li>
<p>Brand new utility to generate charuco board.</p>
</li>
<li>
<p>New activity in <strong>ARCalibration</strong></p>
</li>
<li>
<p>Both standard calibration and charuco calibration displays now reprojection error when calibration (intrinsic and extrinsic) is performed.</p>
</li>
<li>
<p><code>videoCalibration</code> bundle was moved from <code>video/</code> folder to <code>calibration/</code> folder.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_improve_the_synchronization_for_augmented_reality">Improve the synchronization for augmented-reality</h3>
<div class="paragraph">
<p>We reworked the way we synchronize the video frames and the extracted data in real-time.</p>
</div>
<div class="paragraph">
<p>So far, we have made an extensive use of timelines. First the video grabbers store the frames in timelines. Then we process some algorithms on them and we store all the extracted data (markers, transforms, etc&#8230;&#8203;) in timelines as well. At the end, we rely on <code>::videoTools::SFrameMatrixSynchronizer</code>to pick frames, matrices, etc&#8230;&#8203; at the same timestamp and give these synchronized objects to the renderer, i.e. the generic scene.</p>
</div>
<div class="paragraph">
<p>However this does not work well. First this is very tedious to work with timelines, since we need to create a dedicated C++ class for each kind of data we want to manage. For some big data, like meshes, we never did it because this would consume too much memory. And some services are simply not well coded and work directly on the data instead of timelines, etc&#8230;&#8203; Eventually, the renderer even screws up the synchronization since all updated objects request the rendering to be done.</p>
</div>
<div class="paragraph">
<p>So we propose a different approach here. First we restrict the usage of timelines to synchronize video grabbers together, for instance when you
use a camera with multiple sensors or simply several cameras. After that point, all algorithm process the data directly. A new data <code>::arData::MarkerMap</code>is introduced to store a list of markers, since this was the only "data" that only existed in a "timeline" version. To synchronize the results of the algorithms, we propose a new service called <code>SSignalGate</code>. This service waits for several signals to be triggered before sending itself a signal, which indicates everyone before is done. This service is typically used to inform the renderer that it must send everything to the GPU right now. To achieve this, we introduced a new rendering mode in <code>::fwRenderVTK::SRender</code>.</p>
</div>
<div class="paragraph">
<p>You can try Ex04SimpleARCV which uses the new design, but for now everything is backward compatible. But we strongly encourage to have a look at this
very soon and try to port your application to benefit of this improvement.</p>
</div>
</div>
<div class="sect2">
<h3 id="_refactor_cgogn_and_vtk_mesher">Refactor CGogn and VTK mesher</h3>
<div class="ulist">
<ul>
<li>
<p>This commit removed dependency to bundle <code>opVTKMesh</code> in <code>opPOCMesher</code></p>
</li>
<li>
<p><code>CGoGNMesher</code> is now a standard <code>::fwServices::IOperator</code></p>
</li>
<li>
<p>Updated MesherActivity config with new VTK/CGoGN mesher API</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_slandmarks_ogre_adaptor">SLandmarks ogre adaptor</h3>
<div class="paragraph">
<p>A new adaptor to display landmarks had been introduced. Quite basic for the moment but expect it to be improved in the next releases.</p>
</div>
</div>
<div class="sect2">
<h3 id="_importance_driven_volume_rendering">Importance Driven Volume Rendering</h3>
<div class="paragraph">
<p>We changed the way the MImP IDVR countersink geometry (CSG) is defined/computed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CSG used to have a fixed viewport radius, it now has a fixed angle and isn&#8217;t resized when zooming with the camera.</p>
</li>
<li>
<p>Depth lines now start at the importance zone and are in the same unit as the image&#8217;s spacing.</p>
</li>
<li>
<p>The CSG border had to be removed because we couldn&#8217;t easily adapt it to this new method :crying_cat_face:</p>
</li>
<li>
<p>Greyscale CSG and modulation are now separate.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bug_fixes">Bug fixes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_do_not_crash_when_clicking_on_the_distance_button_in_vrrender">Do not crash when clicking on the distance button in VRRender</h3>
<div class="paragraph">
<p>The service `::uiMeasurement::editor::Distance`was also cleaned a bit, and the unused configuration option 'placeInscene' was removed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_properly_handle_button_actions_when_choosing_camera_device">Properly handle button actions when choosing camera device</h3>
<div class="ulist">
<ul>
<li>
<p>Use accept() and reject QtDialog slots instead of our own onValidate() and generic close()</p>
</li>
<li>
<p>In SCamera, check the result of exec dialog window to check if it&#8217;s canceled and don&#8217;t continue to configure the camera if so.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
        </section>

        <footer class="post-footer">


            <figure class="author-image">
                <a class="img" href="" style="background-image: url(https://avatars0.githubusercontent.com/u/8638653?v=4)"><span class="hidden">Flavien Bridault's Picture</span></a>
            </figure>

            <section class="author">
                <h4><a href="">Flavien Bridault</a></h4>

                    <p>Read <a href="">more posts</a> by this author.</p>
                <div class="author-meta">
                    <span class="author-location icon-location">Strasbourg, France</span>
                    <span class="author-link icon-link"><a href="http://www.ircad.fr">http://www.ircad.fr</a></span>
                </div>
            </section>


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/share?text=FW4SPL%2017.0.0%20released&amp;url=https://fw4spl-org.github.io/fw4spl-blog/2018/07/02/FW4SPL-1700-released.html"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://fw4spl-org.github.io/fw4spl-blog/2018/07/02/FW4SPL-1700-released.html"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=https://fw4spl-org.github.io/fw4spl-blog/2018/07/02/FW4SPL-1700-released.html"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>

        </footer>


        <section class="post-comments">
          <div id="disqus_thread"></div>
          <script type="text/javascript">
          var disqus_shortname = 'fw4spl'; // required: replace example with your forum shortname
          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </section>


    </article>

</main>



    <footer class="site-footer clearfix">
        <section class="copyright"><a href="https://fw4spl-org.github.io/fw4spl-blog">FW4SPL</a> &copy; 2018</section>
        <section class="poweredby">Proudly published with <a href="http://hubpress.io">HubPress</a></section>
    </footer>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();      
      </script>

    <script type="text/javascript" src="//fw4spl-org.github.io/fw4spl-blog/themes/Casper/assets/js/jquery.fitvids.js?v=1.0.0"></script>
    <script type="text/javascript" src="//fw4spl-org.github.io/fw4spl-blog/themes/Casper/assets/js/index.js?v=1.0.0"></script>

</body>
</html>
